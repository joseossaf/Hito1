<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="José Ossa">

<title>Hito 1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="Plantilla_files/libs/clipboard/clipboard.min.js"></script>
<script src="Plantilla_files/libs/quarto-html/quarto.js"></script>
<script src="Plantilla_files/libs/quarto-html/popper.min.js"></script>
<script src="Plantilla_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Plantilla_files/libs/quarto-html/anchor.min.js"></script>
<link href="Plantilla_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Plantilla_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Plantilla_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Plantilla_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Plantilla_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Hito 1</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>José Ossa </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="descripción-activo-y-contexto-hito-1" class="level2">
<h2 class="anchored" data-anchor-id="descripción-activo-y-contexto-hito-1">Descripción Activo y Contexto (Hito 1)</h2>
<section id="definición" class="level3">
<h3 class="anchored" data-anchor-id="definición">Definición</h3>
<p>El activo del sector de la banca que se eligió fue la acción del Banco de Chile (CHILE). El Banco de Chile, fundado en 1893, es una reconocida institución financiera en Chile la cual tiene una gran historia de operaciones y presenta una reconocida presencia en el mercado financiero del país, logrando demostrar ser una entidad sólida y estable, que ofrece una amplia variedad de produtos y servicios financieros.</p>
<p>Este activo, y un activo de la banca chilena en general, es relevante estudiar ya que hay un estudio disponible en la Web Of Science que analiza los efectos de los bancos internacionales en el rendimiento de los bancos chilenos. El artículo, llamado “Institutional development and foreign banks in Chile”, que tiene una calificación Q1, dice que los bancos internacionales mejoran la competitividad en la bancada de países en desarrollo. Al mismo tiempo, éstos reducen la volatilidad en los retornos y aumentan los créditos de consumo.</p>
</section>
<section id="motivación" class="level3">
<h3 class="anchored" data-anchor-id="motivación">Motivación</h3>
<p>La elección de este activo se debe a una serie de razones que hacen que su estudio sea relevante para mí. En primer lugar, y como se mencionó anteriormente, el Banco de Chile es una de las instituciones financieras más grandes del país, lo que demuestra que es una institución sólida y que ha logrado mantener su reputación incluso en condiciones económicas adversas, como por ejemplo, la Pandemia. Hace unos meses, tuve la oportunidad de entrevistar al Tesoreso del Banco de Chile, Sergio Karlezi, en donde me contó las estrategias implementadas en la Pandemia del Covid-19, y hablamos del los superiores retornos en comparación a los otras bancos, por lo que también es de mi interés estudiar este activo.</p>
<p>Otra motivación, y que también se hablo en la entrevista con Sergio, es que el Chile funciona como Banco y su modelo de negocios está enfocado en el cliente. Esto lo respalda un reciente reconocimiento en el ranking PXI - Praxis Xperience Index, donde el Chile fue reconocido como “la más destacada en experiencia de clientes”. Esto lo diferencia de los otros bancos agregando valor y logrando captar nuevos clientes.</p>
<p>Finalmente, y esta ya es una motivación más personal, escogí este activo porque voy a realizar la práctica profesional en el Banco de Chile, por lo que creo que es una buena instancia para aprender sobre la institución.</p>
</section>
<section id="contexto" class="level3">
<h3 class="anchored" data-anchor-id="contexto">Contexto</h3>
<p>El contexto financiero del Chile será útil para comprender tanto su posición como el desempeño en el mercado. En esta parte del trabajo se hará una descripción estadística de la acción, como también se analizará una variable económica relevante para el estudio.</p>
<p><img src="photos/Captura%20de%20Pantalla%202023-09-27%20a%20la(s)%2023.01.56.png" class="img-fluid"></p>
<p>Gráfico 1: Historial de precios últimos 5 años.</p>
<p>El Gráfico 1 muestro el precio histórico de la acción en un periodo de 5 años. Podemos identificar que a principios del segundo semestre del 2019, la acción rondaba los $105, sin embargo, la primera caída significativa que se logra identificar es en octubre del 2019, la crisis social. Podemos ver que el precio de la acción continuó disminuyendo producto de la crisis sanitaria, periodo en el que llegó a su mínimo histórico ($57,15). Desde ese entonces, la accón ha logrado repuntar alcanzando, al día de hoy, un precui de $90,15 por acción.</p>
<p>Hay ciertos riesgos que hay que tener presentes a la hora de invertir en un activo de este tipo. A continuación hablaré sobre algunos, explicando el efecto sobre el precio de la acción. En primer lugar está el Riesgo de Mercado, que hace referencia a que el precio de la acción oscile dada ciertas condiciones en el marcado, como por ejemplo, eventos económicos globales, lo que puede provocar una disminución en el valor del activo. Al ser un banco, el activo está expuesto al Riesgo Crediticio, de tal manera que el incumplimiento de distintas obligaciones pueden afectar negativamente el precio de la acción. Otro riesgo súper importante en la industria es el Riego de Tasa de Interés, de tal manera que si hay un aumento inesperado en la tasa de interés, esto puede provocar que hayan menores rendimientos, afectando la calidad del activo.</p>
<p>Las rentabilidades del Chile en los últimos 5 años se muestran en la tabla a continuación.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="photos/Captura%20de%20Pantalla%202023-09-28%20a%20la(s)%2014.32.20.png" class="img-fluid figure-img" width="240"></p>
</figure>
</div>
<p>Tabla 1: Rentabilidades anuales CHILE</p>
<p>Como muestra la Tabla 1, y complementando con el Gráfico 1, el 2019 la acción tubo una rentabilidad anual negativa, la que se debe, principalmente, a los eventos ocurridos en octubre de ese año, lo que produjo inestabilidad económica, afectante fuertemente el precio de la acción. En el año 2020 el mercado se vió afectado por la Pandemia, sin embargo, a pesar de la volatilidad en el primer semestre y el tema político, la acción tuvo un rendimiento anual muy poco negativo, lo que se interpreta que el banco logró adaptarse a las condiciones de la coyuntura, lo que no tuvo efectos considerables. El 2021 también el mercado estaba influenciado por el Covid-19, aunque en menor medida que el año anterior. La principal razón de su rendimiento anual negativo es debido a la continuación del Covid-19 y los efectos económicos producidor por las Políticas Fiscales implementadas en la pandemia, así como también aumento en las tasas de interés, entre otros factores. Respecto al 2022, se identifica un cambio significativo respecto a los años anteriores, alcanzando una extraordinaria rentabilidad anual del 36,69%. Las razones del resultado son principalmente las condiciones económicas en Chile, hay mayor confianza en los inversionistas y un eventual crecimiento en la actividad bancaria. Por último, el año en curso lleva una rentabilidad del 17,24%, que se debe, principalmente, a la recuperación económica.</p>
<p>Las tasas de interés influyen directamente tanto en el funcionamiento como en el desempeño del banco. Es por esto que esta será la variable que se analizará brevemente, y que sin dudas, tiene repercusiones en el valor de la acción del Chile.</p>
<p>En primer lugar, las tasas de interés influyen en el margen de interés neto de los bancos. Cuando las tasas aumentan, los bancos cobran más, pero, al mismo tiempo, el banco ofrece una tasa más alta en los depósitos a plazo. Además, cuando las tasas son más altas, es probable que los prestatarios no pidan financiamiento al banco (o menos de lo pensado), lo que se traduce en una reducción de los ingresos por intereses. Finalmente, la tasa de interés influye en la valoración de activos, de tal manera que tasas más altas reducen el valor de los bonos que tiene el banco, afectando directamente el valor de los activos de éste.</p>
<p><img src="photos/Captura%20de%20Pantalla%202023-09-28%20a%20la(s)%2018.50.34.png" class="img-fluid"></p>
<p>Gráfico 2: Rentabilidades Bancos.</p>
<p>El Gráfico 2 muestra las rentabilidades en el periodo octubre 2021 - octubre 2023, donde la línea negra representa al Banco de Chile, la morada al Banco Santander, la amarilla al BCI y la celeste representa el Banco Itaú. Como se logra ver en el gráfico de arriba, notamos que todos los bancos, menos el Chile, tienen más menos la misma tendencia a igual nivel de rentabilidad, sin embargo, el Banco de Chile, fluctua distinto a los otros bancos en comparación y éste de demuestra tener una mayor rentabilidad acumulada en el periodo mencionado anteriormente.</p>
</section>
<section id="análisis-de-largo-plazo" class="level3">
<h3 class="anchored" data-anchor-id="análisis-de-largo-plazo">Análisis de Largo Plazo</h3>
<section id="caracterización-deuda-aplicación-cap.-15" class="level4">
<h4 class="anchored" data-anchor-id="caracterización-deuda-aplicación-cap.-15">Caracterización deuda (Aplicación cap. 15)</h4>
<p>El Banco de Chile tiene distintas maneras de inversión. En primer lugar, y lo más conocido por las personas, es la inversión a través de los préstamos y créditos, como créditos de consumo, hipotecarios o comerciales. Como se mencionó anteriormente, el banco genera ingresos con los intereses asociados a dichos productos. Además, el Banco de Chile tiene inversiones en acciones de otras empresas, las que generan dividendos y ganancia de capital para el banco. Por otro lado, el Chile utiliza derivados con el objetivo de gestionar el riesgo de mercado.</p>
</section>
<section id="caracterización-de-emisiones-históricas-aplicación-cap.-20" class="level4">
<h4 class="anchored" data-anchor-id="caracterización-de-emisiones-históricas-aplicación-cap.-20">Caracterización de emisiones históricas (Aplicación cap. 20)</h4>
<p>Actualmente, el Banco de Chile tiene 101.017.081.114 acciones en circulación. A lo largo del tiempo, el Chile ha realizado emisión de acciones más de 30 veces. La última emisión de acciones fue en el 2018, donde se emitieron 1.572.948.922 nuevas acciones. El 22 de marzo de 2018 se realizó una Junta Extraordinaria de Accionistas, donde el objetivo de la convocatoria era aumentar el capital del banco capitalizando el 40% de la utilidad líquida distribuible correspondiente al ejercicio 2017 mediante la emisión de acciones liberadas de pago sin valor nominal, a un precio de $93,73 por acción y distribuidas entre los accionistas a razón de 0,02238030880 acciones liberadas de pago por cada acción.</p>
<p>El proceso de emisión en sí comienza en la referida Junta Extraordinaria de Accionistas, en la cual se acuerda aumentar el capital del banco mediante la emisión de una cantidad definida de nuevas acciones. Posteriormente la Superintendencia de Bancos e Instituciones Financieras es la encargada de aprobar la reforma de estatutos, que queda inscrita en el Registro de Comercio de Santiago y es publicada en el Diario Oficial. En este punto la emisión de acciones está inscrita en el Registro de Valores de la Superintendencia. Posterior a lo anterior, el Directorio del Banco de Chile fija una fecha para la emisión y distribución de las respectivas acciones. El directorio informa la razón del derecho a suscripción por acción.Luego de esto, viene el paso de Estabilización del mercado (visto en clases). La información antes mencionada se obtuvo desde la página web del Banco de Chile, en la sección Inversionistas/Junta de accionistas, y luego en el documendo “Junta Accionistas Presentación 2018”.</p>
</section>
<section id="relación-con-activos-derivados" class="level4">
<h4 class="anchored" data-anchor-id="relación-con-activos-derivados">Relación con activos derivados</h4>
<p>El Banco de Chile tiene contratos de instrumentos financieros derivados con el objetivo de proteger la exposición al riesgo cambiaro y al riesgo de tasa de interés.</p>
<p>En los estados financieros están presentes los Contratos de Derivados de Negociación, como Forwards, Swaps, Opciones Call, Opciones Put y Futuros. Como solo se pide hablar sobre uno de estos derivados, desarrollaré un poco los Forwards. “Un Forward es un contrato entre dos partes para comprar o vender un activo subyacente en un determinado precio y fecha”. Estos contratos son utilizados con el objetivo de cubrir el riesgo al cambio de precios de activos.</p>
</section>
</section>
<section id="reporte-grupal" class="level3">
<h3 class="anchored" data-anchor-id="reporte-grupal">Reporte grupal</h3>
<p>En relación a los activos considerados por el grupo, se debe tomar la desición de cómo distribuir los porcentajes de cada uno de ellos, con el fin de determinar un portafolio de inversión. Este último se creará en base a ciertos criterios que se comentarán a continuación, con el fin de maximizar los retornos manteniendo la exposición al riesgo lo más controlado posible.</p>
<table class="table">
<thead>
<tr class="header">
<th>Activo</th>
<th>Porcentaje</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>CENCOSUD S.A</td>
<td>40%</td>
</tr>
<tr class="even">
<td>CHILE</td>
<td>40%</td>
</tr>
<tr class="odd">
<td>ENELCHILE S.A</td>
<td>20%</td>
</tr>
</tbody>
</table>
<p>Estos porcentajes fueron distribuidos de esta manera, ya que cada activo tiene aspectos favorables como desfavorables pero en relación a la rentabilidad esperada se cree que estos representan un portafolio diversificado correctamente. A continuación se identificarán con mayor precisión los puntos relevantes para la determiunación de los porcentajes en base a cada activo en cuestión.</p>
<p>Para el activo BANCO DE CHILE, se determinó destinar un 40% del portafolio ya que ha demostrado ser el banco con mayores utilidades en comparación a su competencia y destaca por un alto ROE. Además, se espera que siga con tendencia positiva, además de seguir superando a su competencia. Es por esto que se determinó asignar un 40% del portafolio a las acciones del Banco de Chile.</p>
<p>Para el activo CENCOSUD S.A , se determinó destinar un 40% del portafolio a este activo debido a que la empresa ha logrado en el último tiempo estabilizar los resultados en Brasil y Colombia lo que estaba impactando negativamente a la compañía. Por otro lado, el negocio relacionado al retail y supermercados se ha visto en alza lo que representa un mayor ingreso para la compañía y beneficio para el país. Continuando con lo anterior, parece importante destinar un porcentaje a este activo debido a que, en relación a las diversas instituciones de clasificación de riesgo, Cencosud S.A figura como una institución estable lo que atrae nuevos inversionistas y posibles retribuciones en relación a las utilidades de la empresa para ser repartidas tal como lo fueron los dividendos otorgados a los accionistas recientemente.</p>
<p>Para el activo ENEL CHILE S.A, se determinó destinar un menor porcentaje que los otros activos en el portafolio, debido a que esta empresa ha tenido ciertas dificultades en el último tiempo. En primer lugar, se puede identificar la mega sequía que se ha vivido en los últimos años, lo que complica la obtención de energía mediante las hidroelectricas. Esto último, luego de el transcurso del año 2023, se ha visto mejorado por el fenómeno del niño, el cual ha producido una mayor cantidad de precipitaciones generando con ello la recuperación de embalses de acumulación de agua. Lo anterior, beneficia a esta empresa para poder producir energía, pero cabe mencionar que sigue siendo una empresa que representa un mayor riesgo para los inversionistas debido a que se ve afectada por fenómenos naturales incontrolables por el ser humano. Es por este motivo, que parece razonable destinar un porcentaje más cauto con el fin de rentabilizar de mejor manera la inversión controlando de mejor manera la exposición al riesgo.</p>
</section>
<section id="aplicación-black-scholes" class="level3">
<h3 class="anchored" data-anchor-id="aplicación-black-scholes">Aplicación Black-Scholes</h3>
<p>Se valoriza correctamente una opción de compra del activo principal definido en el Hito 1, utilizando el modelo de Black-Scholes continuo apoyándose de un código replicable que compute el modelo. Se apoya de literatura para complementar su valorización.</p>
</section>
<section id="modelo-adicional-de-valorizacion" class="level3">
<h3 class="anchored" data-anchor-id="modelo-adicional-de-valorizacion">Modelo Adicional de valorizacion</h3>
<p>Se explica junto con descripcion matemática (fórmulas) correcta un modelo alternativo para valorizar la accion haciendo revisión de literatura cientifica con tal de hacer una referencia a un artículo del modelo.</p>
</section>
<section id="aplicacion-modelo-adicional" class="level3">
<h3 class="anchored" data-anchor-id="aplicacion-modelo-adicional">Aplicacion modelo adicional</h3>
<p>Se aplica el modelo alternativo apoyandose de un código replicable que computa el modelo.</p>
</section>
<section id="análisis-de-contraste-de-ambos-modelos" class="level3">
<h3 class="anchored" data-anchor-id="análisis-de-contraste-de-ambos-modelos">Análisis de contraste de ambos modelos</h3>
<p>Se realiza una comparación de los resultados de ambos modelos de valorización explicando sus similitudes y diferencias.</p>
</section>
<section id="reporte-grupal-caso-administración" class="level3">
<h3 class="anchored" data-anchor-id="reporte-grupal-caso-administración">Reporte Grupal: Caso Administración</h3>
<p>Se eligen uno de los siguientes casos con tal de replicar y responder sus preguntas de acuerdo al activo principal elegido:</p>
<ul>
<li><p>Caso Administración de Capital de Trabajo de Keafer Manufacturing de la página 822 del ROSS.</p></li>
<li><p>Caso Administración de Efectivo de Richmond Corporation de la página 845 del ROSS.</p></li>
<li><p>Caso Administración de Efectivo de Braam Industries de la página 874 del ROSS.</p></li>
</ul>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>